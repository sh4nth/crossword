{"version":3,"sources":["Square.tsx","Clue.tsx","Backtrack.tsx","Crossword.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["SquareType","Square","_Component","props","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","inherits","createClass","key","value","prefix","coords","x","y","svgElements","push","react_default","a","createElement","pointToIdString","width","height","className","fillType","letter","clueNumber","Component","Clue","start","length","isAcross","state","constraints","Array","join","isBacktracking","isFilled","intersectingClues","points","i","point","other","across","down","contains","char","Error","oldConstraint","substr","numberClues","boxes","N","clues","currentClue","goThrough","j","BLACK","lengthen","singleLengthClues","filter","clue","forEach","row","b","c","actualClues","sort","c1","c2","updateConstraintsAndCheckIsValid","clue2","a_intersect","charAt","d_intersect","setConstraint","solve","console","log","intersects","initForBackTracking","fill","words","n","unsolved","guess","find","add","word","rec","delete","index","Set","Mode","usedWords","has","matches","constr","shouldBeBlack","WHITE","cloneAndremoveHighlight","clonedBoxes","cloneDeep","box","ACTIVE","Crossword","_this","nameInput","div","editable","cursor","mode","SOLVE","event","_this2","floor","clientX","currentTarget","clientWidth","clientY","clientHeight","setState","GRID","trySetIsAcrossAndHighlight","focus","possibleClues","getPoints","p","e","newMode","checked","_this3","pressedKey","toUpperCase","getNextPoint","visibility","size","left","top","position","background","border","textAlign","_this4","ref","tabIndex","onClick","id","viewBox","xmlns","map","Square_Square","style","hideIfNotEditable","Switch_default","onChange","onToggleChange","index_es","onFillButtonClick","input","maxLength","onInputBoxChange","getHiddenBoxStyle","ignored","nonNullClues","App","apply","arguments","Crossword_Crossword","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.54ed0cb7.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Point } from './Crossword';\n\nexport type BoxProps = {\n    coords: Point\n    letter: string\n    clueNumber: string\n    fillType: SquareType\n}\n\nexport enum SquareType {\n    BLACK = \"blackSquare\",\n    WHITE = \"whiteSquare\",\n    ACTIVE = \"highlightSquare\",\n}\n\nexport const boxSize = 40;\n\nexport class Square extends Component<BoxProps, {}> {\n    pointToIdString(prefix:string) {\n        return prefix + this.props.coords.x + \"-\" + this.props.coords.y;\n    }\n    \n    constructor(props: BoxProps) {\n        super(props);\n    }\n\n    public render() {\n        let svgElements = [];\n        svgElements.push(\n            <rect\n                key={this.pointToIdString(\"box\")}\n                x={this.props.coords.x * boxSize}\n                y={this.props.coords.y * boxSize}\n                width={boxSize}\n                height={boxSize}\n                className={this.props.fillType}>\n            </rect>);\n        if (this.props.fillType) {\n            svgElements.push(\n                <text\n                    key={this.pointToIdString(\"text\")}\n                    x={(this.props.coords.x + 0.35) * boxSize}\n                    y={(this.props.coords.y + 0.65) * boxSize}\n                    className=\"clueText\">{this.props.letter}\n                </text>);\n            if (this.props.clueNumber != \"\") {\n                svgElements.push(\n                    <text\n                        key={this.pointToIdString(\"clue\")}\n                        x={this.props.coords.x * boxSize + 2}\n                        y={this.props.coords.y * boxSize + 10}\n                        className=\"clueNumber\">{this.props.clueNumber}\n                    </text>);\n            }\n        }\n        return (<g key={this.pointToIdString(\"group\")}>{svgElements}</g>);\n    }\n}\n","import {BoxProps, SquareType} from \"./Square\";\nimport {Point} from \"./Crossword\";\n\ntype ClueType = {\n    clueNumber: number,\n    start: Point,\n    length: number,\n    isAcross: boolean,\n}\n\ntype BacktrackingClueState = {\n    isBacktracking: boolean,\n    isFilled: boolean,\n    constraints: string,\n    intersectingClues: Array<Clue>,\n}\n\nexport class Clue {\n    clueNumber: number;\n    start: Point;\n    length: number;\n    isAcross: boolean;\n    state: BacktrackingClueState;\n\n    constructor(props: ClueType) {\n        this.clueNumber = props.clueNumber;\n        this.start = props.start;\n        this.length = props.length;\n        this.isAcross = props.isAcross;\n        let constraints = Array(props.length + 1).join(\".\");\n        this.state = {\n            isBacktracking: false,\n            isFilled: false,\n            constraints:constraints,\n            intersectingClues:[]};\n    }\n\n    lengthen() {\n        this.length++;\n        this.state.constraints += \".\";\n    }\n\n    public getPoints() {\n        let points = [];\n        for(let i=0; i<this.length; i++) {\n            if (this.isAcross) {\n                points.push({x:this.start.x + i, y:this.start.y});\n            } else {\n                points.push({x:this.start.x, y:this.start.y + i});\n            }\n        }\n        return points;\n    }\n\n    public contains(point: Point) {\n        if (this.isAcross) {\n            return (point.y == this.start.y) && (this.start.x <= point.x) && (point.x < this.start.x + this.length);\n        } else {\n            return (point.x == this.start.x) && (this.start.y <= point.y) && (point.y < this.start.y + this.length);\n        }\n    }\n\n    public intersects(other: Clue) {\n        if (other.isAcross == this.isAcross) {\n            return null;\n        }\n        let across = other.isAcross ? other : this;\n        let down = other.isAcross ? this : other;\n\n        let point = {x: down.start.x, y: across.start.y}\n        if (across.contains(point) && down.contains(point)) {\n            return point;\n        }\n        return null;\n    }\n\n    public setConstraint(i:number, char:string) {\n        if(char.length != 1 || i >= this.state.constraints.length) {\n            throw new Error(\n                \"chr length must be 1 and \" + i + \" < \" + this.state.constraints.length\n                + \" -- \" + this.start.x + \",\" + this.start.y + \"(\" + this.length + \")\" \n                + (this.isAcross? \"A\" : \"D\")); \n        }\n\n        let oldConstraint = this.state.constraints;\n        let oldN = oldConstraint.length;\n        this.state.constraints = oldConstraint.substr(0,i) + char + oldConstraint.substr(i+1);\n    }\n}\n\n\nexport function numberClues(boxes: Array<Array<BoxProps>>): Array<Clue> {\n    let N = boxes.length;\n    let clues : Array<Clue> = [];\n\n    let currentClue : Clue | null = null;\n\n    function goThrough(i: number, j: number, isAcross: boolean) {\n        if (i == N || j == N) {\n            if(currentClue != null) {\n                clues.push(currentClue)\n            }\n            currentClue = null;\n            return;\n        }\n        if(boxes[i][j].fillType != SquareType.BLACK) {\n            if (currentClue == null) {\n                currentClue = new Clue({start:{x:j, y:i}, isAcross: isAcross, length: 1, clueNumber: 0});\n            } else {\n                currentClue.lengthen();\n            }\n        } else {\n            if(currentClue != null) {\n                clues.push(currentClue)\n            }\n            currentClue = null;\n        }\n    }\n\n    for(var i=0; i<N; i++) {\n        for(var j=0; j<N; j++) {\n            boxes[i][j].clueNumber = \"\";\n        }\n    }\n    for(var i=0; i<N; i++) {\n        for(var j=0; j<N+1; j++) {\n            goThrough(i, j, true);\n        }\n    }\n\n    for(var i=0; i<N; i++) {\n        for(var j=0; j<N+1; j++) {\n            goThrough(j, i, false);\n        }\n    }\n    let singleLengthClues = clues\n        .filter(clue => clue.length == 1);\n    \n    boxes.forEach(row => row.forEach(b => {\n        // Boxes which are isolated in both directions should be blacked\n        if (singleLengthClues.filter(c=> c.start.x == b.coords.x && c.start.y == b.coords.y).length == 2) {\n            b.fillType = SquareType.BLACK;\n        }}));\n\n    let actualClues = clues.filter(clue => clue.length > 1)\n        .sort((c1,c2) => c1.start.x + N*c1.start.y - c2.start.x - c2.start.y*N);\n    \n    // Number the clues\n    let clueNumber = 0;\n    for (let i=0; i<actualClues.length; i++) {\n        let clue = actualClues[i];\n        if (boxes[clue.start.y][clue.start.x].clueNumber == \"\") {\n            clueNumber++;\n            boxes[clue.start.y][clue.start.x].clueNumber = \"\" + clueNumber;\n        }\n        clue.clueNumber = clueNumber;\n    }\n    return actualClues;\n}","import { Clue } from \"./Clue\";\n\nfunction updateConstraintsAndCheckIsValid(clues: Array<Clue>) {\n    for(let i=0; i<clues.length; i++) {\n        let clue = clues[i];\n        for(let j=0; j<clue.state.intersectingClues.length; j++) {\n            let clue2 = clue.state.intersectingClues[j];\n            if(!clue.state.isFilled && !clue2.state.isFilled) {\n                continue;\n            }\n            let across = clue.isAcross ? clue : clue2;\n            let down = clue.isAcross ? clue2 : clue;\n\n            let a_intersect = \n                across.state.constraints.charAt(down.start.x - across.start.x);\n            let d_intersect = \n                down.state.constraints.charAt(across.start.y - down.start.y);\n            if (!across.state.isFilled) {\n                across.setConstraint(down.start.x - across.start.x, d_intersect);\n            }\n            if (!down.state.isFilled) {\n                down.setConstraint(across.start.y - down.start.y,  a_intersect);\n            }\n            if (across.state.isFilled && down.state.isFilled && a_intersect != d_intersect) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\n\nfunction initForBackTracking(clues: Array<Clue>) {\n    console.log(\"InBacktr\");\n    for(let i=0; i<clues.length; i++) {\n        clues[i].state.constraints = Array(clues[i].length + 1).join(\" \");\n        clues[i].state.isBacktracking = true;\n        clues[i].state.isFilled = false;\n        clues[i].state.intersectingClues = [];\n    }\n\n    for(let i=0; i<clues.length; i++) {\n        for(let j=i+1; j<clues.length; j++) {\n            let c1 = clues[i];\n            let c2 = clues[j];\n            if (!c1.state || !c2.state) {\n                throw Error(\"Just set above\");\n            }\n            if (c1.intersects(c2)) {\n                c1.state.intersectingClues.push(c2);\n                c2.state.intersectingClues.push(c1);\n            }\n        }\n    }\n}\n\nexport function solve(clues : Array<Clue>) {\n    initForBackTracking(clues);\n    return fill(clues, new Set());\n}\n\nfunction fill(clues : Array<Clue>, words:Set<string>): Array<Clue> | null {\n    let n = clues.filter(c => c.state.isFilled).length;\n    console.log(\"Solved \" + n + \" of \" + clues.length);\n    let unsolved = clues.filter(c => !c.state.isFilled);\n\n\n    if (unsolved.length == 0) {\n        return clues;\n    }\n    \n    for (let i =0; i<unsolved.length; i++) {\n        let clue = unsolved[i];\n        let guess = find(clue, words, 0);\n        if (guess == null) {\n            return null;\n        }\n    }\n\n\n    for (let i=0; i<unsolved.length; i++) {\n        let clue = unsolved[i];\n        let guess = find(clue, words, 0);\n        while (guess != null) {\n            // TODO Make guess return index and guess to continue searches correctly\n            words.add(guess.word);\n            clue.state.constraints = guess.word;\n            clue.state.isFilled = true;\n            let rec = fill(clues, words);\n            if (rec != null) {\n                return rec;\n            }\n            clue.state.isFilled = false;\n            words.delete(guess.word);\n            updateConstraintsAndCheckIsValid(clues);\n            guess = find(clue, words, guess.index+1);\n        }\n    }\n    return null;\n}\n\ntype Guess = {\n    index: number,\n    word: string,\n} | null;\n\n// TODO: Fix this to load from a dictionary\nlet words = [\n    \"AAAAA\", \n    \"ABBBB\", \n    \"ACCCC\", \n    \"ADDDD\", \n    \"BXCXD\", \n    \"BYCYD\",\n    \"BX\",\n    \"XD\",\n    \"BB\",\n    \"AB\",\n];\n\nfunction find(clue:Clue, usedWords:Set<string>, start:number) : Guess {\n    for(let i=start; i < words.length; i++) {\n        if (usedWords.has(words[i]) || words[i].length != clue.length) {\n            continue;\n        }\n        if (matches(clue.state.constraints, words[i])) {\n            return {index: i, word:words[i]};\n        }\n    }\n    return null;\n}\n\nfunction matches(constr: string, word:string) {\n    for (let i=0; i<constr.length; i++) {\n        if (constr.charAt(i) != \" \" && constr.charAt(i) != word.charAt(i)) {\n            return false;\n        }\n    }\n    return true;\n}","import React, { Component, MouseEvent, CSSProperties } from 'react';\nimport { Square, boxSize, BoxProps, SquareType } from \"./Square\";\nimport {cloneDeep, floor} from 'lodash';\nimport Switch from '@material-ui/core/Switch';\nimport {numberClues, Clue} from './Clue';\nimport { Button } from '@material-ui/core';\nimport { solve } from './Backtrack';\n\nexport type Point = {\n    x: number,\n    y: number,\n}\n\nenum Mode {\n    SOLVE = \"SOLVE\",\n    GRID = \"GRID\",\n}\n\ntype State = {\n    boxes: Array<Array<BoxProps>>,\n    clues: Array<Clue>,\n    cursor: Point,\n    mode: Mode,\n    isAcross: boolean,\n};\n\nfunction shouldBeBlack(i:number, j:number) {\n    if (i%2 == 1 && j%2 == 1) {\n        return SquareType.BLACK;\n    } else {\n        return SquareType.WHITE;\n    }\n}\n\nconst N = 5;\n\ntype CrosswordProps = {\n    editable: boolean,\n}\n\nfunction cloneAndremoveHighlight(boxes: Array<Array<BoxProps>>) {\n    let clonedBoxes = cloneDeep(boxes);\n    clonedBoxes.forEach(row => row.forEach(box => {\n        if(box.fillType == SquareType.ACTIVE) {\n            box.fillType = SquareType.WHITE;\n        }\n    }));\n    return clonedBoxes;\n}\n\nexport class Crossword extends Component<CrosswordProps, State> {\n    nameInput: HTMLInputElement | null | undefined;\n    div: HTMLDivElement | null | undefined;\n\n    public onClick(event: MouseEvent) {\n        let x = floor(N * event.clientX / event.currentTarget.clientWidth);\n        let y = floor(N * event.clientY / event.currentTarget.clientHeight);\n        let point = {x: x, y: y};\n        this.setState(state => {\n            let clues = state.clues;\n            let clonedBoxes = cloneAndremoveHighlight(state.boxes);\n            let isAcross = state.isAcross;\n            if (state.mode == Mode.GRID) {\n                if (clonedBoxes[y][x].fillType == SquareType.BLACK) {\n                    clonedBoxes[y][x].fillType = SquareType.WHITE;\n                } else {\n                    clonedBoxes[y][x].fillType = SquareType.BLACK;\n                }\n                clues = numberClues(clonedBoxes);\n            } else {\n                isAcross = this.trySetIsAcrossAndHighlight(clonedBoxes, clues, state.isAcross, point);\n            }\n            return {boxes:clonedBoxes, cursor:point, clues: clues, isAcross: isAcross};\n        });\n        if (this.nameInput) {\n            this.nameInput.focus();\n        }\n    }\n\n    // Caller must set state using the new clonedBoxes\n    trySetIsAcrossAndHighlight(clonedBoxes:Array<Array<BoxProps>>, clues: Array<Clue>, isAcross: boolean, point: Point) {\n        let possibleClues = clues.filter(c => c.contains(point));\n                if (possibleClues.length > 2) {\n                    throw new Error(\"Should not be possible\");\n                } else if (possibleClues.length == 2) {\n                    let clue = possibleClues.filter(c => c.isAcross == isAcross)[0];\n                    clue.getPoints().forEach(\n                            p => {clonedBoxes[p.y][p.x].fillType = SquareType.ACTIVE;});\n                } else if (possibleClues.length == 1) {\n                    let clue = possibleClues[0];\n                    isAcross = clue.isAcross;\n                    clue.getPoints().forEach(\n                            p => {clonedBoxes[p.y][p.x].fillType = SquareType.ACTIVE;});\n                } else {\n                    console.log(\"No clues at this point\");\n                }\n                return isAcross;\n    }\n\n    getNextPoint(p: Point) {\n        if (p.x<0 || p.y < 0) {\n            return p;\n        }\n        if (this.state.isAcross) {\n            if (p.x < N-1) {\n                return {x: p.x+1, y: p.y};\n            } else {\n                return p;\n            }\n        } else {\n            if (p.y < N-1) {\n                return {x: p.x, y: p.y+1};\n            } else {\n                return p;\n            }\n        }\n    }\n\n    onToggleChange(e: React.ChangeEvent<HTMLInputElement>) {\n        let newMode = !e.currentTarget.checked ? Mode.SOLVE : Mode.GRID;\n        this.setState(state => {\n            return {mode: newMode, boxes: cloneAndremoveHighlight(state.boxes)}; });\n    }\n\n    onInputBoxChange() {\n        let x = this.state.cursor.x;\n        let y = this.state.cursor.y;\n        if (x < 0 || y < 0 || this.state.boxes[y][x].fillType == SquareType.BLACK || !this.nameInput) {\n            console.log(\"Ignoring changeEvent\");\n            return;\n        }\n\n        let pressedKey = this.nameInput.value;\n        pressedKey = pressedKey.toUpperCase();\n        if (pressedKey > 'Z' || pressedKey < 'A') {\n            console.log(\"Ignoring key \" + pressedKey);\n            return;\n        }\n        this.setState(state => {\n            let clonedBoxes = cloneDeep(state.boxes);\n            clonedBoxes[state.cursor.y][state.cursor.x].letter = pressedKey;\n            return {boxes:clonedBoxes, cursor: this.getNextPoint(state.cursor)};\n        });\n    }\n\n    constructor(props: CrosswordProps) {\n        super(props);\n        if (!props.editable) {\n            console.log(\"To implmenet loading crossword later\");\n        }\n\n        let boxes = [];\n        for (var i = 0; i < N; i++) {\n            let row = []\n            for (var j = 0; j < N; j++) {\n                row.push({\n                    fillType: shouldBeBlack(i,j),\n                    letter: \"\",\n                    coords: {y: i, x: j},\n                    clueNumber:\"\"});\n            }\n            boxes.push(row);\n        }\n        this.state = { \n            boxes: boxes,\n            clues: numberClues(boxes),\n            cursor:{x: -1, y: -1}, \n            mode: Mode.SOLVE, \n            isAcross: true};\n    }\n\n    getHiddenBoxStyle() : CSSProperties {\n        if(!this.div || this.state.mode == Mode.GRID) {\n            return {\n                visibility: \"collapse\",\n            };\n        }\n        let size = this.div.clientWidth;\n        return {\n            left: size * (this.state.cursor.x / N),\n            top: size * (this.state.cursor.y / N),\n            width: size / N,\n            height: size/ N,\n            position: \"absolute\",\n            background: \"transparent\",\n            border: \"none\",\n            textAlign: \"center\",\n         }\n    }\n\n    hideIfNotEditable() : CSSProperties {\n        if(!this.props.editable) {\n            return {\n                visibility: \"collapse\",\n            };\n        }\n        return {\n            visibility: \"visible\",\n        };\n    }\n\n    render() {\n        console.log(\"Render Crossword\");\n        return (\n        <div ref={div => {this.div = div;}} className=\"crossword\" tabIndex={0}>\n            <svg \n                onClick={e => this.onClick(e)}\n                id=\"crossword-svg\" viewBox={\"0 0 \" + N*boxSize + \" \" + N*boxSize} xmlns=\"http://www.w3.org/2000/svg\">\n                {this.state.boxes.map((row) => (\n                    row.map((b) => {\n                    return <Square \n                        key={b.coords.x + \"-\" + b.coords.y}\n                        fillType={b.fillType}\n                        coords={b.coords}\n                        letter={b.letter}\n                        clueNumber={b.clueNumber} />\n                    })\n                ))}\n            </svg>\n            <div style={this.hideIfNotEditable()}>\n                Edit Grid<Switch value=\"Edit\" onChange={e => this.onToggleChange(e)}/>\n                <Button onClick={e => this.onFillButtonClick(e)}>Fill</Button>\n            </div>\n            <input value=\"\" ref={input => {this.nameInput = input;}} \n            maxLength={1} \n            onClick={e => {this.setState(state => {\n                let clonedBoxes = cloneAndremoveHighlight(state.boxes);\n                let isAcross = this.trySetIsAcrossAndHighlight(\n                    clonedBoxes, state.clues, !state.isAcross, state.cursor);\n                return {isAcross: isAcross, boxes:clonedBoxes}})\n            }}\n            onChange={e => this.onInputBoxChange()} \n            style={this.getHiddenBoxStyle()}/>\n            <div>\n                Across\n                <ul className=\"clueList\">\n                    {this.state.clues.filter(c=> c.isAcross).map(c => {\n                        return <li key={c.clueNumber + \" \" + c.isAcross}>{c.clueNumber}. {c.state.constraints} ({c.length})</li>\n                    })}\n                </ul>\n            </div>\n            <div>\n                Down\n                <ul className=\"clueList\">\n                    {this.state.clues.filter(c=> !c.isAcross).map(c => {\n                        return <li key={c.clueNumber + \" \" + c.isAcross}>{c.clueNumber}. {c.state.constraints} ({c.length})</li>\n                    })}\n                </ul>\n            </div>\n        </div>);\n    }\n\n    onFillButtonClick(ignored: any) {\n        let clues = solve(this.state.clues);\n        if(clues != null) {\n            let nonNullClues = clues\n            let clonedBoxes = cloneAndremoveHighlight(this.state.boxes);\n            for(let i=0; i<N; i++) {\n                for(let j=0; j<N; j++) {\n                    clonedBoxes[i][j].letter = \"\";\n                }\n            }\n            clues.forEach(\n                clue => {\n                    for (let i=0; i<clue.length; i++) {\n                        if(!clue.state.isFilled) {\n                            continue;\n                        }\n                        if(clue.isAcross) {\n                            clonedBoxes[clue.start.y][clue.start.x + i].letter = clue.state.constraints.charAt(i);\n                        } else {\n                            clonedBoxes[clue.start.y + i][clue.start.x].letter = clue.state.constraints.charAt(i);\n                        }\n                    }\n                }\n            )\n            this.setState(state => {\n                return {boxes: clonedBoxes, clues: nonNullClues}\n            });\n        } else {\n            console.log(\"No solution!\");\n        }\n    }\n}\n\nexport default Crossword;","import React, { Component } from 'react';\nimport './App.css';\nimport { Crossword } from './Crossword';\n\nexport class App extends Component {\n  render() {\n    return (<div className=\"container\">\n      <Crossword editable={true}/>\n    </div>);\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from \"./App\";\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}