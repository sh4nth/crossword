(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(t,e,n){"use strict";n.r(e);var r,o=n(0),s=n.n(o),i=n(24),c=n.n(i),l=(n(60),n(8)),a=n(6),u=n(19),h=n(18),f=n(20);n(61);!function(t){t.BLACK="blackSquare",t.WHITE="whiteSquare",t.ACTIVE="highlightSquare"}(r||(r={}));var p,d=function(t){function e(t){return Object(l.a)(this,e),Object(u.a)(this,Object(h.a)(e).call(this,t))}return Object(f.a)(e,t),Object(a.a)(e,[{key:"pointToIdString",value:function(t){return t+this.props.coords.x+"-"+this.props.coords.y}}]),Object(a.a)(e,[{key:"render",value:function(){var t=[];return t.push(s.a.createElement("rect",{key:this.pointToIdString("box"),x:40*this.props.coords.x,y:40*this.props.coords.y,width:40,height:40,className:this.props.fillType})),this.props.fillType&&(t.push(s.a.createElement("text",{key:this.pointToIdString("text"),x:40*(this.props.coords.x+.35),y:40*(this.props.coords.y+.65),className:"clueText"},this.props.letter)),""!=this.props.clueNumber&&t.push(s.a.createElement("text",{key:this.pointToIdString("clue"),x:40*this.props.coords.x+2,y:40*this.props.coords.y+10,className:"clueNumber"},this.props.clueNumber))),s.a.createElement("g",{key:this.pointToIdString("group")},t)}}]),e}(o.Component),g=n(25),y=n(53),v=n.n(y),b=function(){function t(e){Object(l.a)(this,t),this.clueNumber=void 0,this.start=void 0,this.length=void 0,this.isAcross=void 0,this.clueNumber=e.clueNumber,this.start=e.start,this.length=e.length,this.isAcross=e.isAcross}return Object(a.a)(t,[{key:"getPoints",value:function(){for(var t=[],e=0;e<this.length;e++)this.isAcross?t.push({x:this.start.x+e,y:this.start.y}):t.push({x:this.start.x,y:this.start.y+e});return t}},{key:"contains",value:function(t){return this.isAcross?t.y==this.start.y&&this.start.x<=t.x&&t.x<this.start.x+this.length:t.x==this.start.x&&this.start.y<=t.y&&t.y<this.start.y+this.length}}]),t}();function x(t){var e=t.length,n=[],o=null;function s(s,i,c){if(s==e||i==e)return null!=o&&n.push(o),void(o=null);t[s][i].fillType!=r.BLACK?null==o?o=new b({start:{x:i,y:s},isAcross:c,length:1,clueNumber:0}):o.length++:(null!=o&&n.push(o),o=null)}for(var i=0;i<e;i++)for(var c=0;c<e;c++)t[i][c].clueNumber="";for(i=0;i<e;i++)for(c=0;c<e+1;c++)s(i,c,!0);for(i=0;i<e;i++)for(c=0;c<e+1;c++)s(c,i,!1);var l=n.filter(function(t){return 1==t.length}),a=new Set;l.forEach(function(t){if(a.has(t))return console.log("Duplicate"),[];a.add(t)});var u=n.filter(function(t){return t.length>1}).sort(function(t,n){return t.start.x+e*t.start.y-n.start.x-n.start.y*e}),h=0;console.log("-----------");for(var f=0;f<u.length;f++){var p=u[f];console.log("Start"),console.log(p),""==t[p.start.y][p.start.x].clueNumber&&(h++,t[p.start.y][p.start.x].clueNumber=""+h),p.clueNumber=h}return console.log(u),u}function m(t,e){return t%2==1&&e%2==1?r.BLACK:r.WHITE}!function(t){t.SOLVE="SOLVE",t.GRID="GRID"}(p||(p={}));var E=5;function w(){var t=window.innerWidth>window.innerHeight?window.innerHeight:window.innerWidth;return{width:t,height:t}}function I(t){var e=Object(g.cloneDeep)(t);return e.forEach(function(t){return t.forEach(function(t){t.fillType==r.ACTIVE&&(t.fillType=r.WHITE)})}),e}var T=function(t){function e(t){var n;Object(l.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).nameInput=void 0,n.div=void 0,t.editable||console.log("To implmenet loading crossword later");for(var r=[],o=0;o<E;o++){for(var s=[],i=0;i<E;i++)s.push({fillType:m(o,i),letter:"",coords:{y:o,x:i},clueNumber:""});r.push(s)}return n.state={boxes:r,clues:x(r),cursor:{x:-1,y:-1},mode:p.SOLVE,isAcross:!0},n}return Object(f.a)(e,t),Object(a.a)(e,[{key:"onClick",value:function(t){var e=this,n=Object(g.floor)(E*t.clientX/t.currentTarget.clientWidth),o=Object(g.floor)(E*t.clientY/t.currentTarget.clientHeight),s={x:n,y:o};this.setState(function(t){var i=t.clues,c=I(t.boxes),l=t.isAcross;return t.mode==p.GRID?(c[o][n].fillType==r.BLACK?c[o][n].fillType=r.WHITE:c[o][n].fillType=r.BLACK,i=x(c)):l=e.trySetIsAcrossAndHighlight(c,i,t.isAcross,s),{boxes:c,cursor:s,clues:i,isAcross:l}}),console.log(n+","+o),this.nameInput&&this.nameInput.focus()}},{key:"trySetIsAcrossAndHighlight",value:function(t,e,n,o){var s=e.filter(function(t){return t.contains(o)});if(console.log(s),s.length>2)throw new Error("Should not be possible");if(2==s.length){console.log("Trying for 2"+n);var i=s.filter(function(t){return t.isAcross==n})[0];console.log(i),i.getPoints().forEach(function(e){t[e.y][e.x].fillType=r.ACTIVE})}else if(1==s.length){var c=s[0];n=c.isAcross,c.getPoints().forEach(function(e){t[e.y][e.x].fillType=r.ACTIVE})}else console.log("No clues at this point");return n}},{key:"getNextPoint",value:function(t){return t.x<0||t.y<0?t:this.state.isAcross?t.x<E-1?{x:t.x+1,y:t.y}:t:t.y<E-1?{x:t.x,y:t.y+1}:t}},{key:"onToggleChange",value:function(t){var e=t.currentTarget.checked?p.GRID:p.SOLVE;this.setState(function(t){return{mode:e,boxes:I(t.boxes)}})}},{key:"onInputBoxChange",value:function(){var t=this,e=this.state.cursor.x,n=this.state.cursor.y;if(e<0||n<0||this.state.boxes[n][e].fillType==r.BLACK||!this.nameInput)console.log("Ignoring changeEvent");else{var o=this.nameInput.value;(o=o.toUpperCase())>"Z"||o<"A"?console.log("Ignoring key "+o):this.setState(function(e){var n=Object(g.cloneDeep)(e.boxes);return n[e.cursor.y][e.cursor.x].letter=o,{boxes:n,cursor:t.getNextPoint(e.cursor)}})}}}]),Object(a.a)(e,[{key:"getHiddenBoxStyle",value:function(){if(!this.div||this.state.mode==p.GRID)return{visibility:"collapse"};var t=this.div.clientWidth;return{left:t*(this.state.cursor.x/E),top:t*(this.state.cursor.y/E),width:t/E,height:t/E,position:"absolute",background:"transparent",border:"none",textAlign:"center"}}},{key:"hideIfNotEditable",value:function(){return this.props.editable?{visibility:"visible"}:{visibility:"collapse"}}},{key:"render",value:function(){var t=this;return console.log("Render Cross"+this.state.boxes[0][0].letter),s.a.createElement("div",{ref:function(e){t.div=e},className:"Crossword",style:w(),tabIndex:0},s.a.createElement("svg",{onClick:function(e){return t.onClick(e)},id:"crossword-svg",viewBox:"0 0 "+40*E+" "+40*E,xmlns:"http://www.w3.org/2000/svg"},this.state.boxes.map(function(t){return t.map(function(t){return s.a.createElement(d,{key:t.coords.x+"-"+t.coords.y,fillType:t.fillType,coords:t.coords,letter:t.letter,clueNumber:t.clueNumber})})})),s.a.createElement("div",{style:this.hideIfNotEditable()},"Edit Grid",s.a.createElement(v.a,{value:"Edit",onChange:function(e){return t.onToggleChange(e)}})),s.a.createElement("input",{value:"",ref:function(e){t.nameInput=e},maxLength:1,onClick:function(e){t.setState(function(e){var n=I(e.boxes);return{isAcross:t.trySetIsAcrossAndHighlight(n,e.clues,!e.isAcross,e.cursor),boxes:n}})},onChange:function(e){return t.onInputBoxChange()},style:this.getHiddenBoxStyle()}),s.a.createElement("div",{className:"blackSquare"}))}}]),e}(o.Component),A=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(a.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement(T,{editable:!0}))}}]),e}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},55:function(t,e,n){t.exports=n(148)},60:function(t,e,n){},61:function(t,e,n){}},[[55,1,2]]]);
//# sourceMappingURL=main.c71b3134.chunk.js.map