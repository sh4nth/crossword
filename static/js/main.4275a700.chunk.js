(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(t,e,r){t.exports=r(254)},168:function(t,e,r){},169:function(t,e,r){},254:function(t,e,r){"use strict";r.r(e);var s,n=r(0),i=r.n(n),o=r(25),a=r.n(o),l=(r(168),r(9)),c=r(7),u=r(21),h=r(20),f=r(22);r(169);!function(t){t.BLACK="blackSquare",t.WHITE="whiteSquare",t.ACTIVE="highlightSquare"}(s||(s={}));var d=function(t){function e(t){return Object(l.a)(this,e),Object(u.a)(this,Object(h.a)(e).call(this,t))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"pointToIdString",value:function(t){return t+this.props.coords.x+"-"+this.props.coords.y}}]),Object(c.a)(e,[{key:"render",value:function(){var t=[];return t.push(i.a.createElement("rect",{key:this.pointToIdString("box"),x:40*this.props.coords.x,y:40*this.props.coords.y,width:40,height:40,className:this.props.fillType})),this.props.fillType&&(t.push(i.a.createElement("text",{key:this.pointToIdString("text"),x:40*(this.props.coords.x+.35),y:40*(this.props.coords.y+.65),className:"clueText"},this.props.letter)),""!=this.props.clueNumber&&t.push(i.a.createElement("text",{key:this.pointToIdString("clue"),x:40*this.props.coords.x+2,y:40*this.props.coords.y+10,className:"clueNumber"},this.props.clueNumber))),i.a.createElement("g",{key:this.pointToIdString("group")},t)}}]),e}(n.Component),g=r(26),v=r(33),p=r.n(v),y=function(){function t(e){Object(l.a)(this,t),this.clueNumber=void 0,this.start=void 0,this.length=void 0,this.isAcross=void 0,this.state=void 0,this.clueNumber=e.clueNumber,this.start=e.start,this.length=e.length,this.isAcross=e.isAcross;var r=Array(e.length+1).join(".");this.state={isBacktracking:!1,isFilled:!1,constraints:r,intersectingClues:[]}}return Object(c.a)(t,[{key:"lengthen",value:function(){this.length++,this.state.constraints+="."}},{key:"clearConstraints",value:function(){this.state.constraints=Array(this.length+1).join(".")}},{key:"getPoints",value:function(){for(var t=[],e=0;e<this.length;e++)this.isAcross?t.push({x:this.start.x+e,y:this.start.y}):t.push({x:this.start.x,y:this.start.y+e});return t}},{key:"contains",value:function(t){return this.isAcross?t.y==this.start.y&&this.start.x<=t.x&&t.x<this.start.x+this.length:t.x==this.start.x&&this.start.y<=t.y&&t.y<this.start.y+this.length}},{key:"intersects",value:function(t){if(t.isAcross==this.isAcross)return null;var e=t.isAcross?t:this,r=t.isAcross?this:t,s={x:r.start.x,y:e.start.y};return e.contains(s)&&r.contains(s)?s:null}},{key:"setConstraint",value:function(t,e){if(1!=e.length||t>=this.state.constraints.length)throw new Error("chr length must be 1 and "+t+" < "+this.state.constraints.length+" -- "+this.start.x+","+this.start.y+"("+this.length+")"+(this.isAcross?"A":"D"));var r=this.state.constraints;r.length;this.state.constraints=r.substr(0,t)+e+r.substr(t+1)}}]),t}();function x(t){var e=t.length,r=[],n=null;function i(i,o,a){if(i==e||o==e)return null!=n&&r.push(n),void(n=null);t[i][o].fillType!=s.BLACK?null==n?n=new y({start:{x:o,y:i},isAcross:a,length:1,clueNumber:0}):n.lengthen():(null!=n&&r.push(n),n=null)}for(var o=0;o<e;o++)for(var a=0;a<e;a++)t[o][a].clueNumber="";for(o=0;o<e;o++)for(a=0;a<e+1;a++)i(o,a,!0);for(o=0;o<e;o++)for(a=0;a<e+1;a++)i(a,o,!1);var l=r.filter(function(t){return 1==t.length});t.forEach(function(t){return t.forEach(function(t){2==l.filter(function(e){return e.start.x==t.coords.x&&e.start.y==t.coords.y}).length&&(t.fillType=s.BLACK)})});for(var c=r.filter(function(t){return t.length>1}).sort(function(t,r){return t.start.x+e*t.start.y-r.start.x-r.start.y*e}),u=0,h=0;h<c.length;h++){var f=c[h];""==t[f.start.y][f.start.x].clueNumber&&(u++,t[f.start.y][f.start.x].clueNumber=""+u),f.clueNumber=u}return c}var b=r(61);function m(t){for(var e=0;e<t.length;e++){var r=t[e];r.state.isFilled||r.clearConstraints();for(var s=0;s<r.state.intersectingClues.length;s++){var n=r.state.intersectingClues[s];if(r.state.isFilled||n.state.isFilled){var i=r.isAcross?r:n,o=r.isAcross?n:r,a=i.state.constraints.charAt(o.start.x-i.start.x),l=o.state.constraints.charAt(i.start.y-o.start.y);if(i.state.isFilled||i.setConstraint(o.start.x-i.start.x,l),o.state.isFilled||o.setConstraint(i.start.y-o.start.y,a),i.state.isFilled&&o.state.isFilled&&a!=l)return!1}}}return!0}function A(t,e){!function(t){console.log("InBacktr");for(var e=0;e<t.length;e++)t[e].clearConstraints(),t[e].state.isBacktracking=!0,t[e].state.isFilled=!1,t[e].state.intersectingClues=[];for(var r=0;r<t.length;r++)for(var s=r+1;s<t.length;s++){var n=t[r],i=t[s];if(!n.state||!i.state)throw Error("Just set above");n.intersects(i)&&(n.state.intersectingClues.push(i),i.state.intersectingClues.push(n))}}(t);for(var r=function(t){E[t]=e.filter(function(e){return e.length==t}).concat(k[t])},s=2;s<=15;s++)r(s);return function t(e,r,s){if(s>40)throw new Error("Recursion depth");var n=e.filter(function(t){return t.state.isFilled}).length;console.log("Solved "+n+" of "+e.length);var i=e.filter(function(t){return!t.state.isFilled});if(0==i.length)return e;for(var o=0;o<i.length;o++){var a=i[o],l=I(a,r,0);if(null==l)return null}for(var c=0;c<i.length;c++)for(var u=i[c],h=I(u,r,0);null!=h;){r.add(h.word),u.state.constraints=h.word,u.state.isFilled=!0,m(e);var f=t(e,r,s+1);if(null!=f)return f;u.state.isFilled=!1,r.delete(h.word),m(e),h=I(u,r,h.index+1)}return null}(t,new Set,0)}for(var C,E=Array(16),k=Array(16),w=0;w<=15;w++)k[w]=[];function I(t,e,r){for(var s,n=E[t.length],i=r;i<n.length;i++)if(!e.has(n[i])&&(s=t.state.constraints,-1!=n[i].search(s)))return{index:i,word:n[i]};return null}function T(t,e){return t%2==1&&e%2==1?s.BLACK:s.WHITE}k[2]=["BX","XD","BB","AC","CC","AB"],k[5]=["AAAAA","ABBBB","ACCCC","ADDDD","BXCXD","BYCYD"],function(t){t.SOLVE="SOLVE",t.GRID="GRID"}(C||(C={}));var N=5;function B(t){var e=Object(g.cloneDeep)(t);return e.forEach(function(t){return t.forEach(function(t){t.fillType==s.ACTIVE&&(t.fillType=s.WHITE)})}),e}var O=function(t){function e(t){var r;Object(l.a)(this,e),(r=Object(u.a)(this,Object(h.a)(e).call(this,t))).nameInput=void 0,r.div=void 0,r.specialWords=void 0,t.editable||console.log("To implmenet loading crossword later");for(var s=[],n=0;n<N;n++){for(var i=[],o=0;o<N;o++)i.push({fillType:T(n,o),letter:"",coords:{y:n,x:o},clueNumber:""});s.push(i)}return r.state={boxes:s,clues:x(s),cursor:{x:-1,y:-1},mode:C.SOLVE,isAcross:!0},r}return Object(f.a)(e,t),Object(c.a)(e,[{key:"onClick",value:function(t){var e=this,r=t.currentTarget.getBoundingClientRect(),n=Object(g.floor)(N*(t.clientX-r.left)/r.width),i=Object(g.floor)(N*(t.clientY-r.top)/r.height);console.log(n+", "+i);var o={x:n,y:i};this.setState(function(t){var r=t.clues,a=B(t.boxes),l=t.isAcross;return t.mode==C.GRID?(a[i][n].fillType==s.BLACK?a[i][n].fillType=s.WHITE:a[i][n].fillType=s.BLACK,r=x(a)):l=e.trySetIsAcrossAndHighlight(a,r,t.isAcross,o),{boxes:a,cursor:o,clues:r,isAcross:l}}),this.nameInput&&this.nameInput.focus()}},{key:"trySetIsAcrossAndHighlight",value:function(t,e,r,n){var i=e.filter(function(t){return t.contains(n)});if(i.length>2)throw new Error("Should not be possible");if(2==i.length)i.filter(function(t){return t.isAcross==r})[0].getPoints().forEach(function(e){t[e.y][e.x].fillType=s.ACTIVE});else if(1==i.length){var o=i[0];r=o.isAcross,o.getPoints().forEach(function(e){t[e.y][e.x].fillType=s.ACTIVE})}else console.log("No clues at this point");return r}},{key:"getNextPoint",value:function(t){return t.x<0||t.y<0?t:this.state.isAcross?t.x<N-1?{x:t.x+1,y:t.y}:t:t.y<N-1?{x:t.x,y:t.y+1}:t}},{key:"onToggleChange",value:function(t){var e=t.currentTarget.checked?C.GRID:C.SOLVE;this.setState(function(t){return{mode:e,boxes:B(t.boxes)}})}},{key:"onInputBoxChange",value:function(){var t=this,e=this.state.cursor.x,r=this.state.cursor.y;if(e<0||r<0||this.state.boxes[r][e].fillType==s.BLACK||!this.nameInput)console.log("Ignoring changeEvent");else{var n=this.nameInput.value;(n=n.toUpperCase())>"Z"||n<"A"?console.log("Ignoring key "+n):this.setState(function(e){var r=Object(g.cloneDeep)(e.boxes);return r[e.cursor.y][e.cursor.x].letter=n,{boxes:r,cursor:t.getNextPoint(e.cursor)}})}}}]),Object(c.a)(e,[{key:"getHiddenBoxStyle",value:function(){if(!this.div||this.state.mode==C.GRID)return{visibility:"collapse"};var t=this.div.clientWidth;return{left:this.div.offsetLeft+t*(this.state.cursor.x/N),top:this.div.offsetTop+t*(this.state.cursor.y/N),width:t/N,height:t/N,position:"absolute",background:"transparent",border:"none",textAlign:"center"}}},{key:"hideIfNotEditable",value:function(){return this.props.editable?{visibility:"visible"}:{visibility:"collapse"}}},{key:"render",value:function(){var t=this;return console.log("Render Crossword"),i.a.createElement("div",{ref:function(e){t.div=e},className:"crossword",tabIndex:0},i.a.createElement("svg",{onClick:function(e){return t.onClick(e)},id:"crossword-svg",viewBox:"0 0 "+40*N+" "+40*N,xmlns:"http://www.w3.org/2000/svg"},this.state.boxes.map(function(t){return t.map(function(t){return i.a.createElement(d,{key:t.coords.x+"-"+t.coords.y,fillType:t.fillType,coords:t.coords,letter:t.letter,clueNumber:t.clueNumber})})})),i.a.createElement("div",{style:this.hideIfNotEditable()},"Edit Grid",i.a.createElement(p.a,{value:"Edit",onChange:function(e){return t.onToggleChange(e)}}),i.a.createElement(b.a,{onClick:function(e){return t.onFillButtonClick(e)}},"Fill"),i.a.createElement("br",null),i.a.createElement("textarea",{className:"extraWords",ref:function(e){t.specialWords=e}})),i.a.createElement("input",{value:"",ref:function(e){t.nameInput=e},maxLength:1,onClick:function(e){t.setState(function(e){var r=B(e.boxes);return{isAcross:t.trySetIsAcrossAndHighlight(r,e.clues,!e.isAcross,e.cursor),boxes:r}})},onChange:function(e){return t.onInputBoxChange()},style:this.getHiddenBoxStyle()}),i.a.createElement("div",null,"Across",i.a.createElement("ul",{className:"clueList"},this.state.clues.filter(function(t){return t.isAcross}).map(function(t){return i.a.createElement("li",{key:t.clueNumber+" "+t.isAcross},t.clueNumber,". ",t.state.constraints," (",t.length,")")}))),i.a.createElement("div",null,"Down",i.a.createElement("ul",{className:"clueList"},this.state.clues.filter(function(t){return!t.isAcross}).map(function(t){return i.a.createElement("li",{key:t.clueNumber+" "+t.isAcross},t.clueNumber,". ",t.state.constraints," (",t.length,")")}))))}},{key:"onFillButtonClick",value:function(t){var e=[];this.specialWords&&new Set(this.specialWords.value.toUpperCase().split(/[^A-Z]/)).forEach(function(t){return e.push(t)});var r=A(this.state.clues,e);if(null!=r){for(var s=r,n=B(this.state.boxes),i=0;i<N;i++)for(var o=0;o<N;o++)n[i][o].letter="";r.forEach(function(t){for(var e=0;e<t.length;e++)t.state.isFilled&&(t.isAcross?n[t.start.y][t.start.x+e].letter=t.state.constraints.charAt(e):n[t.start.y+e][t.start.x].letter=t.state.constraints.charAt(e))}),this.setState(function(t){return{boxes:n,clues:s}})}else console.log("No solution!")}}]),e}(n.Component),S=function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement(O,{editable:!0}))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[163,1,2]]]);
//# sourceMappingURL=main.4275a700.chunk.js.map